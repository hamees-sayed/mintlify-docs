---
title: 'Get Streaming Speech'
description: "This API provides real-time text-to-speech conversion using WebSockets. This allows you to send a text message and receive audio data back in real-time."
---

<Note>Endpoint:
`wss://call-dev.smallest.ai/invocations_streaming?token={authorization_token}`</Note>

<Tip>Contact the team at info@smallest.ai for your authorization_token.</Tip>

## Protocol

The WebSocket API uses a half-duplex protocol wherein the client sends a json object but receives bytes in return.

## How to use

The client can send messages with text input to the server. The messages can contain the following fields:
```JSON5
{
    'text': 'आवाज़ एक बहुत ही बढ़िया text to speech मॉडल है', 
    'voice_id': 'sarika_north_indian_female'
}
```

<ParamField path="text" type="string">
  Text that needs to be converted to speech
</ParamField>

<ParamField path="voice_id" type="string">
  Name of the voice needed. Please note that the voice_id needs to be sent as a string. Check the section above for example. The only allowed values are - 
    1. sarika_north_indian_female
    <iframe width="500" height="300" src="https://www.youtube.com/embed/tj6IGjw_Wuc?si=SxUDzr_GLgUfwXxk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe> 

    2. rakesh_north_indian_male 
    <iframe width="500" height="300" src="https://www.youtube.com/embed/9Mt0qeYW-Zs?si=WBuUAIkGk0tff-OT" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

    3. chandralekha_bengal_female
    <iframe width="500" height="300" src="https://www.youtube.com/embed/SniAeDlVqFc?si=FZ0cHTRM1EBAqFuZ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

    4. rustom_bengal_male
    <iframe width="500" height="300" src="https://www.youtube.com/embed/Sjra76bsccQ?si=6gYrN2e5a8dAnSSE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

    5. ishwara_south_indian_male
    <iframe width="500" height="300" src="https://www.youtube.com/embed/694VWepnDeE?si=dpXKVIPgiXZD1Iy2" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

</ParamField>

## Example Code to Use - Python

```python
import json
import websockets
from datetime import datetime, timezone
from websockets.sync.client import connect

url = 'wss://call-dev.smallest.ai/invocations_streaming?token=<authorization_token>'
payload = {
    'text': 'आवाज़ एक बहुत ही बढ़िया text to speech मॉडल है',
    'voice_id': 'sarika_north_indian_female'
}

def awaaz_streaming():
    first = False
    wav_audio_bytes = b''
    print(f"start_time: {datetime.now(timezone.utc)}")

    try:
        with connect(url) as websocket:
            data = json.dumps(payload)
            websocket.send(data)
            print(f"> {data}")

            try:
                while True:
                    response = websocket.recv()
                    wav_audio_bytes += response
                    if not first:
                        print(f"first response: {datetime.now(timezone.utc)}")
                        first = True
            except websockets.exceptions.ConnectionClosed as e:
                if e.code == 1000:
                    print("Connection closed normally (code 1000).")
                else:
                    print(f"Connection closed with code {e.code}: {e.reason}")
            except Exception as e:
                print(f"Exception occurred: {e}")
            finally:
                print("Saving audio file")
                with open(f"awaaz_{payload['voice_id']}.wav", "wb") as f:
                    f.write(wav_audio_bytes)
                print("Connection closed")
    except Exception as e:
        print(f"Failed to establish connection: {e}")

if __name__ == "__main__":
    awaaz_streaming()
```

## Example Code to Use - Node

```javascript
const WebSocket = require('ws');
const fs = require('fs');
const { v4: uuidv4 } = require('uuid');
const { URL } = require('url');

const url = new URL('wss://call-dev.smallest.ai/invocations_streaming');
url.searchParams.append('token', '<authorization_token>');

const payload = {
    text: 'आवाज़ एक बहुत ही बढ़िया text to speech मॉडल है',
    voice_id: 'sarika_north_indian_female'
};

function awaazStreaming() {
    let first = false;
    let wavAudioBytes = Buffer.alloc(0);
    console.log(`start_time: ${new Date().toISOString()}`);

    const ws = new WebSocket(url.toString());

    ws.on('open', function open() {
        const data = JSON.stringify(payload);
        ws.send(data);
        console.log(`> ${data}`);
    });

    ws.on('message', function incoming(response) {
        wavAudioBytes = Buffer.concat([wavAudioBytes, response]);
        if (!first) {
            console.log(`first response: ${new Date().toISOString()}`);
            first = true;
        }
    });

    ws.on('error', function error(e) {
        console.error(`Exception occurred: ${e}`);
    });

    ws.on('close', function close() {
        console.log("Saving audio file");
        const fileName = `awaaz_${payload.voice_id}.wav`;
        fs.writeFileSync(fileName, wavAudioBytes);
        console.log("Connection closed");
    });
}

awaazStreaming();
```


